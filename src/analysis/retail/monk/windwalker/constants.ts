import SPELLS from 'common/SPELLS';
import Spell from 'common/SPELLS/Spell';
import { TALENTS_MONK } from 'common/TALENTS';

import { castDamageMap } from './castDamage';

// Based on SpellData for Hit Combo and Serenity
export const ABILITIES_AFFECTED_BY_DAMAGE_INCREASES = [
  SPELLS.MELEE,
  SPELLS.TIGER_PALM,
  SPELLS.BLACKOUT_KICK,
  SPELLS.FISTS_OF_FURY_CAST,
  SPELLS.FISTS_OF_FURY_DAMAGE,
  TALENTS_MONK.RISING_SUN_KICK_TALENT,
  SPELLS.RISING_SUN_KICK_DAMAGE,
  SPELLS.SPINNING_CRANE_KICK,
  SPELLS.SPINNING_CRANE_KICK_DAMAGE,
  SPELLS.FLYING_SERPENT_KICK,
  SPELLS.CRACKLING_JADE_LIGHTNING,
  // TALENTS_MONK
  TALENTS_MONK.CHI_WAVE_TALENT,
  SPELLS.CHI_WAVE_TALENT_DAMAGE,
  SPELLS.WHIRLING_DRAGON_PUNCH_TALENT,
  TALENTS_MONK.RUSHING_JADE_WIND_TALENT,
  TALENTS_MONK.CHI_BURST_TALENT,
  SPELLS.CHI_BURST_TALENT_DAMAGE,
  TALENTS_MONK.EYE_OF_THE_TIGER_TALENT,
  TALENTS_MONK.STRIKE_OF_THE_WINDLORD_TALENT,
  // covenants
  TALENTS_MONK.JADEFIRE_STOMP_TALENT,
  SPELLS.FAELINE_STOMP_PULSE_DAMAGE,
];

export const ABILITIES_AFFECTED_BY_MASTERY = [
  SPELLS.TIGER_PALM,
  SPELLS.BLACKOUT_KICK,
  SPELLS.FISTS_OF_FURY_CAST,
  TALENTS_MONK.RISING_SUN_KICK_TALENT,
  TALENTS_MONK.CHI_WAVE_TALENT,
  SPELLS.SPINNING_CRANE_KICK,
  SPELLS.FLYING_SERPENT_KICK,
  SPELLS.CRACKLING_JADE_LIGHTNING,
  SPELLS.WHIRLING_DRAGON_PUNCH_TALENT,
  SPELLS.TOUCH_OF_DEATH,
  TALENTS_MONK.CHI_BURST_TALENT,
  TALENTS_MONK.RUSHING_JADE_WIND_TALENT,
  SPELLS.EXPEL_HARM,
  TALENTS_MONK.JADEFIRE_STOMP_TALENT,
  TALENTS_MONK.BONEDUST_BREW_TALENT,
  TALENTS_MONK.STRIKE_OF_THE_WINDLORD_TALENT,
];

export const DAMAGE_AFFECTED_BY_MASTERY = [
  SPELLS.TIGER_PALM,
  SPELLS.BLACKOUT_KICK,
  SPELLS.FISTS_OF_FURY_DAMAGE,
  TALENTS_MONK.RISING_SUN_KICK_TALENT,
  SPELLS.SPINNING_CRANE_KICK_DAMAGE,
  SPELLS.FLYING_SERPENT_KICK_DAMAGE,
  SPELLS.CRACKLING_JADE_LIGHTNING,
  SPELLS.WHIRLING_DRAGON_PUNCH_TALENT,
  TALENTS_MONK.CHI_WAVE_TALENT,
  SPELLS.CHI_WAVE_TALENT_DAMAGE,
  TALENTS_MONK.CHI_BURST_TALENT,
  SPELLS.CHI_BURST_TALENT_DAMAGE,
  TALENTS_MONK.RUSHING_JADE_WIND_TALENT,
  SPELLS.EXPEL_HARM_DAMAGE,
  TALENTS_MONK.JADEFIRE_STOMP_TALENT,
  SPELLS.FAELINE_STOMP_PULSE_DAMAGE,
  TALENTS_MONK.STRIKE_OF_THE_WINDLORD_TALENT,
];

export const CHI_SPENDERS = [
  SPELLS.BLACKOUT_KICK,
  TALENTS_MONK.RISING_SUN_KICK_TALENT,
  SPELLS.FISTS_OF_FURY_CAST,
  SPELLS.SPINNING_CRANE_KICK,
  TALENTS_MONK.RUSHING_JADE_WIND_TALENT,
  TALENTS_MONK.STRIKE_OF_THE_WINDLORD_TALENT,
];

export const ABILITIES_CLONED_BY_SEF = [
  SPELLS.TIGER_PALM,
  SPELLS.BLACKOUT_KICK,
  SPELLS.FISTS_OF_FURY_CAST,
  SPELLS.FISTS_OF_FURY_DAMAGE,
  TALENTS_MONK.RISING_SUN_KICK_TALENT,
  SPELLS.RISING_SUN_KICK_DAMAGE,
  TALENTS_MONK.CHI_WAVE_TALENT,
  SPELLS.SPINNING_CRANE_KICK,
  SPELLS.SPINNING_CRANE_KICK_DAMAGE,
  SPELLS.CRACKLING_JADE_LIGHTNING,
  SPELLS.WHIRLING_DRAGON_PUNCH_TALENT,
  TALENTS_MONK.STRIKE_OF_THE_WINDLORD_TALENT,
];

/**
 * Abilities that are affected by the T28 4-set bonus
 * "Primordial Power"
 * https://www.wowhead.com/spell=363924/primordial-power
 *
 * https://docs.google.com/spreadsheets/d/1QvAtBtaFKaAuhy9iGiMmEzCd--kuwL3oWIDwny6GEoQ/edit
 */
export const ABILITIES_THAT_CONSUME_PRIMORDIAL_POWER: Spell[] = [
  SPELLS.BLACKOUT_KICK,
  TALENTS_MONK.CHI_BURST_TALENT,
  TALENTS_MONK.CHI_WAVE_TALENT,
  SPELLS.CRACKLING_JADE_LIGHTNING,
  TALENTS_MONK.JADEFIRE_STOMP_TALENT,
  SPELLS.FISTS_OF_FURY_CAST,
  SPELLS.FLYING_SERPENT_KICK,
  TALENTS_MONK.RISING_SUN_KICK_TALENT,
  TALENTS_MONK.RUSHING_JADE_WIND_TALENT,
  SPELLS.SPINNING_CRANE_KICK,
  SPELLS.TIGER_PALM,
  SPELLS.WHIRLING_DRAGON_PUNCH_TALENT,
];

/**
 * Damage that is affected by the T28 4-set bonus
 * "Primordial Power"
 * https://www.wowhead.com/spell=363924/primordial-power
 *
 * https://docs.google.com/spreadsheets/d/1QvAtBtaFKaAuhy9iGiMmEzCd--kuwL3oWIDwny6GEoQ/edit
 */
export const DAMAGE_AFFECTED_BY_PRIMORDIAL_POWER: Spell[] = [
  // Include both all original cast events
  ...ABILITIES_THAT_CONSUME_PRIMORDIAL_POWER,
  // And all known damage spells
  ...ABILITIES_THAT_CONSUME_PRIMORDIAL_POWER.map((a) => castDamageMap.get(a) || []).flat(),
  SPELLS.EYE_OF_THE_TIGER_HEAL,
  SPELLS.JADE_IGNITION_DAMAGE,
];

/**
 * These spells are special cases that benefit from the 4p bonus while the
 * buff is up, regardless if the cast was powered or not
 *
 * https://docs.google.com/spreadsheets/d/1QvAtBtaFKaAuhy9iGiMmEzCd--kuwL3oWIDwny6GEoQ/edit
 */
export const DAMAGE_AFFECTED_BY_PRIMORDIAL_POWER_NAIVELY: Spell[] = [
  ...(castDamageMap.get(TALENTS_MONK.CHI_BURST_TALENT) || []),
  ...(castDamageMap.get(TALENTS_MONK.CHI_WAVE_TALENT) || []),
  SPELLS.EYE_OF_THE_TIGER_HEAL,
  SPELLS.JADE_IGNITION_DAMAGE,
];

export const BLACKOUT_KICK_COOLDOWN_REDUCTION_MS = 1000;
