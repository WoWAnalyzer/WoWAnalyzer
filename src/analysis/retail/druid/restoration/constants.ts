import SPELLS from 'common/SPELLS';
import Spell from 'common/SPELLS/Spell';
import Combatant from 'parser/core/Combatant';
import { TALENTS_DRUID } from 'common/TALENTS';

export const REJUVENATION_BUFFS: Spell[] = [SPELLS.REJUVENATION, SPELLS.REJUVENATION_GERMINATION];

export const LIFEBLOOM_BUFFS: Spell[] = [
  SPELLS.LIFEBLOOM_HOT_HEAL,
  SPELLS.LIFEBLOOM_UNDERGROWTH_HOT_HEAL,
];

export function lifebloomSpell(c: Combatant): Spell {
  return c.hasTalent(TALENTS_DRUID.UNDERGROWTH_TALENT)
    ? SPELLS.LIFEBLOOM_UNDERGROWTH_HOT_HEAL
    : SPELLS.LIFEBLOOM_HOT_HEAL;
}

/** This is also the list of spell IDs that are boosted by Druid's mastery */
export const ABILITIES_AFFECTED_BY_HEALING_INCREASES: number[] = [
  SPELLS.REJUVENATION.id,
  SPELLS.REJUVENATION_GERMINATION.id,
  SPELLS.REGROWTH.id,
  SPELLS.WILD_GROWTH.id,
  SPELLS.CULTIVATION.id,
  SPELLS.SPRING_BLOSSOMS.id,
  SPELLS.CENARION_WARD_HEAL.id,
  // frenzied regen?
  SPELLS.LIFEBLOOM_HOT_HEAL.id,
  SPELLS.LIFEBLOOM_UNDERGROWTH_HOT_HEAL.id,
  SPELLS.LIFEBLOOM_BLOOM_HEAL.id,
  SPELLS.SWIFTMEND.id,
  SPELLS.TRANQUILITY_HEAL.id,
  SPELLS.EFFLORESCENCE_HEAL.id,
  SPELLS.ADAPTIVE_SWARM_HEAL.id,
  SPELLS.GROVE_TENDING.id,
  SPELLS.VERDANCY.id,
  SPELLS.GROVE_GUARDIANS_SWIFTMEND.id,
  SPELLS.GROVE_GUARDIANS_NOURISH.id,
  SPELLS.GROVE_GUARDIANS_WILD_GROWTH.id,
  SPELLS.NOURISH.id,
  SPELLS.T31_TREANT_CLEAVE_NOURISH.id,
  SPELLS.T31_CAST_CLEAVE_NOURISH.id,
  SPELLS.THRIVING_VEGETATION.id,
  SPELLS.SYMBIOTIC_BLOOMS_WILDSTALKER.id,
  SPELLS.BURSTING_GROWTH_HEAL.id,
  SPELLS.DREAM_BLOOM.id,
  SPELLS.FLOWER_WALK.id,
];

// procs Nature's Vigil
export const SINGLE_TARGET_HEALING: Spell[] = [
  SPELLS.REJUVENATION,
  SPELLS.REJUVENATION_GERMINATION,
  SPELLS.REGROWTH,
  SPELLS.CULTIVATION,
  SPELLS.SPRING_BLOSSOMS, // for some reason lol
  SPELLS.CENARION_WARD_HEAL,
  SPELLS.FRENZIED_REGENERATION,
  SPELLS.LIFEBLOOM_HOT_HEAL,
  SPELLS.LIFEBLOOM_UNDERGROWTH_HOT_HEAL,
  SPELLS.LIFEBLOOM_BLOOM_HEAL,
  SPELLS.SWIFTMEND,
  SPELLS.ADAPTIVE_SWARM_HEAL,
  SPELLS.GROVE_TENDING,
  // Grove Guardians don't count ):
];

export const ABILITIES_AFFECTED_BY_HEALING_INCREASES_SPELL_OBJECTS =
  ABILITIES_AFFECTED_BY_HEALING_INCREASES.map((id) => SPELLS[id]);

/** IDs of heals that get triple benefit from mastery */
export const TRIPLE_MASTERY_BENEFIT_IDS: number[] = [
  SPELLS.NOURISH.id,
  SPELLS.GROVE_GUARDIANS_NOURISH.id,
  SPELLS.T31_TREANT_CLEAVE_NOURISH.id,
  SPELLS.T31_CAST_CLEAVE_NOURISH.id,
];

/** IDs of all buffs that give a mastery stack */
export const MASTERY_STACK_BUFF_IDS: number[] = [
  SPELLS.REJUVENATION.id,
  SPELLS.REJUVENATION_GERMINATION.id,
  SPELLS.REGROWTH.id,
  SPELLS.WILD_GROWTH.id,
  SPELLS.CULTIVATION.id,
  SPELLS.SPRING_BLOSSOMS.id,
  SPELLS.CENARION_WARD_HEAL.id,
  SPELLS.FRENZIED_REGENERATION.id,
  SPELLS.LIFEBLOOM_HOT_HEAL.id,
  SPELLS.LIFEBLOOM_UNDERGROWTH_HOT_HEAL.id,
  SPELLS.TRANQUILITY_HEAL.id,
  SPELLS.ADAPTIVE_SWARM_HEAL.id,
  SPELLS.RENEWING_BLOOM.id,
  SPELLS.GROVE_TENDING.id,
  SPELLS.SYMBIOTIC_BLOOMS_WILDSTALKER.id,
];

// HoTs that get rate increased by Flourish
export const FLOURISH_INCREASED_RATE = [
  SPELLS.REJUVENATION,
  SPELLS.REJUVENATION_GERMINATION,
  SPELLS.REGROWTH,
  SPELLS.WILD_GROWTH,
  SPELLS.CULTIVATION,
  SPELLS.CENARION_WARD_HEAL,
  SPELLS.LIFEBLOOM_HOT_HEAL,
  SPELLS.LIFEBLOOM_UNDERGROWTH_HOT_HEAL,
  SPELLS.TRANQUILITY_HEAL,
  SPELLS.ADAPTIVE_SWARM_HEAL,
  SPELLS.RENEWING_BLOOM,
  SPELLS.GROVE_TENDING,
];

// HoTs that get rate increased by Photosynthesis, which is different from the Flourish one because Blizzard
export const PHOTO_INCREASED_RATE = [
  ...FLOURISH_INCREASED_RATE,
  SPELLS.SPRING_BLOSSOMS,
  SPELLS.EFFLORESCENCE_HEAL,
  SPELLS.SYMBIOTIC_BLOOMS_WILDSTALKER,
];

// HoTs that get rate increased by Liveliness
export const LIVELINESS_INCREASED_RATE = PHOTO_INCREASED_RATE;

//probably need to add natures vigil here as well and need to check if it reduces tranquility itself
export const DRUID_COOLDOWNS = [
  SPELLS.WILD_GROWTH.id,
  SPELLS.SWIFTMEND.id,
  TALENTS_DRUID.CENARION_WARD_TALENT.id,
  SPELLS.TRANQUILITY_CAST.id,
  SPELLS.CONVOKE_SPIRITS.id,
  TALENTS_DRUID.FLOURISH_TALENT.id,
  SPELLS.NATURES_SWIFTNESS.id,
];
